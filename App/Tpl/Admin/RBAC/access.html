<extend name="base" />
<block name="content-title">
<h4>配置权限</h4>  
</block>
<block name="content">
	<script type='text/javascript'>
$(function(){
	$('input[level=1]').click(function(){
		var inputs=$(this).parents('.app').find('input');
		$(this).attr('checked') ? inputs.attr('checked','checked') : inputs.removeAttr('checked');
	});
	$('input[level=2]').click(function(){
		var inputs=$(this).parents('dl').find('input');
		$(this).attr('checked') ? inputs.attr('checked','checked') : inputs.removeAttr('checked');
	});
});
</script>
	<link rel='stylesheet' href='__PUBLIC__/Css/node.css'>
          <div class="tab-content default-tab" id="tab1">
            <table>
              <tbody>
              	<div id="wrap">
              		<form action="{tp#:U('setAccess')}" method='post'>
<a href="{tp#:U('role')}" class='button'>返回</a>&nbsp;&nbsp;&nbsp;
<input type="submit" value='保存修改' class="button" />
		
		<volist name="node" id="app">
			<div class='app'>
				<p>
					<strong>{tp#$app['title']}</strong>
					<input type="checkbox" name='access[]' value='{tp#$app.id}_1' level='1' <if condition="$app['access']">checked='checked'</if>/>
				</p>
				<volist name="app.child" id="action">
					<dl>
						<dt>
							<strong>{tp#$action.title}</strong>
							<input type='checkbox' name='access[]' value='{tp#$action.id}_2' level='2' <if condition="$action['access']">checked='checked'</if>/>
						</dt>
						<volist name="action.child" id="method">
							<dd>
								<span>{tp#$method.title}</span>
								<input type='checkbox' name='access[]' value='{tp#$method.id}_3' level='3' <if condition="$method['access']">checked='checked'</if>/>
							</dd>
						</volist>
					</dl>
					
				</volist>
			</div>		
		
		</volist>
		<input type='hidden' name='rid' value='{tp#$rid}'>
	
	</form>

</div>
              </tbody>             
            </table>
          </div> <!-- End #tab1 -->  
</block>